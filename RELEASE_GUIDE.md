# 版本发布指南

本项目提供了两个自动化脚本来简化版本发布流程。

## 🚀 快速发布 (推荐)

使用 `quick-release.sh` 进行快速发布，自动递增补丁版本号：

```bash
./quick-release.sh
```

**功能：**
- ✅ 自动检测当前最新版本
- ✅ 自动递增补丁版本 (例: v0.1.2 → v0.1.3)
- ✅ 自动提交所有未提交的更改
- ✅ 自动创建并推送tag
- ✅ 一键完成整个发布流程

**适用场景：**
- 日常bug修复
- 小功能更新
- 快速迭代发布

## 🎯 完整版本管理

使用 `release.sh` 进行更精细的版本控制：

```bash
# 递增补丁版本 (默认)
./release.sh
./release.sh patch

# 递增次版本
./release.sh minor

# 递增主版本  
./release.sh major
```

**版本递增规则：**
- `patch`: 0.1.2 → 0.1.3 (bug修复)
- `minor`: 0.1.2 → 0.2.0 (新功能)
- `major`: 0.1.2 → 1.0.0 (重大更新)

**功能：**
- ✅ 支持语义化版本控制
- ✅ 交互式确认流程
- ✅ 彩色输出和详细日志
- ✅ 错误检查和回滚保护
- ✅ 自动生成发布说明

## 📋 使用示例

### 场景1: 快速修复bug
```bash
# 修改代码...
./quick-release.sh
# 自动发布 v0.1.3
```

### 场景2: 添加新功能
```bash
# 开发新功能...
./release.sh minor
# 发布 v0.2.0
```

### 场景3: 重大版本更新
```bash
# 重构代码...
./release.sh major
# 发布 v1.0.0
```

## 🔧 脚本特性

### quick-release.sh
- **简单快速**: 一键发布，无需交互
- **自动化**: 自动处理所有步骤
- **安全**: 基本的git状态检查
- **适合**: 日常开发和快速迭代

### release.sh
- **功能完整**: 支持所有版本类型
- **交互式**: 确认每个步骤
- **安全**: 完整的错误检查
- **灵活**: 支持自定义提交消息

## 📦 发布后使用

发布完成后，用户可以通过以下方式使用新版本：

```bash
# 使用最新版本
go get github.com/yalks/wallet@latest

# 使用特定版本
go get github.com/yalks/wallet@v0.1.3
```

## ⚠️ 注意事项

1. **确保代码已测试**: 发布前请确保代码已经过充分测试
2. **检查依赖**: 确保所有依赖都是最新且兼容的
3. **备份重要数据**: 重大版本更新前建议备份
4. **遵循语义化版本**: 选择合适的版本递增类型

## 🆘 故障排除

### 权限问题
```bash
chmod +x release.sh quick-release.sh
```

### Git推送失败
检查远程仓库权限和网络连接

### 版本冲突
手动删除冲突的tag后重新运行脚本

## 📝 版本历史

- v0.1.0 - 初始版本
- v0.1.1 - 增强交易结构和代码简化  
- v0.1.2 - 增强交易构建器和钱包管理器功能

---

**提示**: 建议在CI/CD流程中集成这些脚本，实现自动化发布。
